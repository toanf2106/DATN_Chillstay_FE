<template>
  <div class="home-container">
    <!-- C·∫£i thi·ªán Hero Section v·ªõi slideshow -->
    <section class="hero-section">
      <div class="hero-slideshow">
        <div class="slide" :class="{ active: currentSlide === 0 }">
          <img
            src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80"
            alt="Chillstay M·ªôc Ch√¢u - Slide 1">
        </div>
        <div class="slide" :class="{ active: currentSlide === 1 }">
          <img
            src="https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80"
            alt="Chillstay M·ªôc Ch√¢u - Slide 2">
        </div>
        <div class="slide" :class="{ active: currentSlide === 2 }">
          <img
            src="https://images.unsplash.com/photo-1488462237308-ecaa28b729d7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80"
            alt="Chillstay M·ªôc Ch√¢u - Slide 3">
        </div>

        <!-- N√∫t ƒëi·ªÅu h∆∞·ªõng -->
        <div class="slide-nav prev" @click="prevSlide">
          <i class="fas fa-chevron-left"></i>
        </div>
        <div class="slide-nav next" @click="nextSlide">
          <i class="fas fa-chevron-right"></i>
        </div>

        <!-- Ch·ªâ b√°o slide -->
        <div class="slide-indicators">
          <span v-for="(_, index) in 3" :key="index" class="indicator" :class="{ active: currentSlide === index }"
            @click="setSlide(index)"></span>
        </div>
      </div>

      <div class="hero-content">
        <div class="hero-text">
          <h1 class="hero-title">ChillStay <span class="highlight">M·ªôc Ch√¢u</span></h1>
          <p class="hero-subtitle">
            Kh√°m ph√° nh·ªØng homestay ƒë·ªôc ƒë√°o, retreat y√™n b√¨nh t·∫°i trung t√¢m M·ªôc Ch√¢u v·ªõi t·∫ßm nh√¨n
            n√∫i non h√πng vƒ©, tr·∫£i nghi·ªám eco-friendly v√† vƒÉn h√≥a ƒë·ªãa ph∆∞∆°ng.
          </p>
          <div class="hero-search">
            <div class="search-box">
              <div class="search-input">
                <i class="fas fa-search search-icon"></i>
                <input type="text" placeholder="Nh·∫≠p t√™n homestay" v-model="searchName" />
              </div>
              <div class="search-input dropdown">
                <i class="fas fa-home search-icon"></i>
                <select v-model="searchLocation">
                  <option value="T·∫•t c·∫£ lo·∫°i homestay">T·∫•t c·∫£ lo·∫°i homestay</option>
                  <option v-for="loai in loaiHomestays" :key="loai.id" :value="loai.tenLoaiHomestay">
                    {{ loai.tenLoaiHomestay }}
                  </option>
                </select>
              </div>
              <div class="search-input dropdown">
                <i class="fas fa-tag search-icon"></i>
                <select v-model="searchPrice">
                  <option>T·∫•t c·∫£ m·ª©c gi√°</option>
                  <option>D∆∞·ªõi 500 ngh√¨n</option>
                  <option>500 ngh√¨n - 1 tri·ªáu</option>
                  <option>1 - 1.5 tri·ªáu</option>
                  <option>Tr√™n 1.5 tri·ªáu</option>
                </select>
              </div>
              <button class="search-btn" @click="handleSearch">T√¨m ki·∫øm</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Ph·∫ßn T√≠nh NƒÉng -->
    <section class="features-section">
      <div class="container">
        <h2 class="section-title">T·∫°i Sao Ch·ªçn ChillStay M·ªôc Ch√¢u?</h2>
        <div class="features-grid">
          <div class="feature-card">
            <i class="fas fa-mountain feature-icon"></i>
            <h3>T·∫ßm Nh√¨n N√∫i Non H√πng Vƒ©</h3>
            <p>
              Th∆∞·ªüng th·ª©c c·∫£nh quan thi√™n nhi√™n, phong c·∫£nh tuy·ªát ƒë·∫πp v√† kh√≠ h·∫≠u m√°t m·∫ª quanh nƒÉm.
            </p>
          </div>
          <div class="feature-card">
            <i class="fas fa-home feature-icon"></i>
            <h3>V·ªã Tr√≠ T·∫≠p Trung</h3>
            <p>
              H∆°n 20 homestay, cottage, v√† villa trong c√πng khu v·ª±c, d·ªÖ d√†ng di chuy·ªÉn v√† kh√°m ph√°.
            </p>
          </div>
          <div class="feature-card">
            <i class="fas fa-concierge-bell feature-icon"></i>
            <h3>Qu·∫£n L√Ω Th·ªëng Nh·∫•t</h3>
            <p>D·ªãch v·ª• hospitality ƒë·ªìng nh·∫•t v·ªõi h·ªó tr·ª£ 24/7 t·ª´ ch·ªß nh√† th√¢n thi·ªán.</p>
          </div>
          <div class="feature-card">
            <i class="fas fa-parking feature-icon"></i>
            <h3>Ti·ªán √çch Chung</h3>
            <p>B√£i ƒë·ªó xe, nh√† h√†ng, qu√°n c√† ph√™, v√† ti·ªán √≠ch eco-friendly ƒë∆∞·ª£c chia s·∫ª.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Ph·∫ßn Homestay N·ªïi B·∫≠t -->
    <section class="homestays-section">
      <div class="container">
        <h2 class="section-title">Homestay N·ªïi B·∫≠t T·∫°i M·ªôc Ch√¢u</h2>

        <!-- Tr·∫°ng th√°i ƒëang t·∫£i -->
        <div v-if="isLoading" class="loading-container">
          <i class="fas fa-spinner fa-spin"></i>
          <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
        </div>

        <!-- Th√¥ng b√°o l·ªói -->
        <div v-else-if="hasError" class="error-container">
          <i class="fas fa-exclamation-circle"></i>
          <p>{{ errorMessage }}</p>
          <button class="retry-btn" @click="fetchHomestayData">Th·ª≠ l·∫°i</button>
        </div>

        <!-- L∆∞·ªõi Homestay -->
        <div v-else class="homestays-grid">
          <div class="homestay-card" v-for="home in displayedHomestays" :key="home.id">
            <div class="homestay-image">
              <img v-if="home.hinhAnh" :src="fixImageUrl(home.hinhAnh)" :alt="home.tenHomestay" />
              <img v-else :src="defaultImage" :alt="home.tenHomestay" />
              <div class="homestay-rating" v-if="home.danhGiaTrungBinh !== undefined">
                <span class="stars">‚òÖ</span> {{ home.danhGiaTrungBinh }} ({{ home.soDanhGia || 0 }}
                ƒë√°nh gi√°)
              </div>
              <span class="homestay-status" v-if="home.trangThai">
                {{ home.trangThai === true ? 'Ho·∫°t ƒë·ªông' : home.trangThai }}
              </span>
            </div>
            <div class="homestay-content">
              <p class="homestay-location" v-if="home.diaChi">
                <i class="fas fa-map-marker-alt"></i> {{ home.diaChi }}
              </p>
              <h3>{{ home.tenHomestay }}</h3>
              <div class="homestay-details">
                <span v-if="home.loaiHomeStay"><i class="fas fa-home"></i> {{ home.loaiHomeStay.tenLoai }}</span>
                <span v-if="home.dienTich"><i class="fas fa-ruler"></i> {{ home.dienTich }} m¬≤</span>
                <span v-if="home.sucChua"><i class="fas fa-bed"></i> {{ home.sucChua }} ng∆∞·ªùi/cƒÉn</span>
              </div>

              <div class="homestay-owner" v-if="home.hotenChuHomestay">
                <i class="fas fa-user"></i> Ch·ªß homestay: {{ home.hotenChuHomestay }}
              </div>

              <div class="homestay-price" v-if="home.giaCaHomestay">
                <span class="price">{{ home.giaCaHomestay.toLocaleString('vi-VN') }}‚Ç´</span>
                <button class="book-now-btn" @click="navigateToBooking(home.id)">Xem Chi Ti·∫øt Homestay</button>
              </div>
            </div>
          </div>
        </div>

        <!-- D√≤ng xem t·∫•t c·∫£ homestay -->
        <div class="view-more-line" v-if="!isLoading && !hasError">
          <div class="line-separator">
            <span class="line"></span>
            <span class="view-more-text" @click="viewAllHomestays">Xem T·∫•t C·∫£ Homestay</span>
            <span class="line"></span>
          </div>
        </div>
      </div>
    </section>

    <!-- Ph·∫ßn ƒê√°nh gi√° Tr·∫£i nghi·ªám -->
    <section class="reviews-section">
      <div class="container">
        <div class="reviews-content">
          <div class="reviews-header">
            <h2 class="section-title">ƒê√°nh gi√° t·ª´ nh·ªØng ng∆∞·ªùi ƒë√£ tr·∫£i nghi·ªám</h2>
            <p class="reviews-subtitle">
              Kh√°ch h√†ng chia s·∫ª v·ªÅ nh·ªØng k·ª∑ ni·ªám tuy·ªát v·ªùi tr√™n chuy·∫øn du l·ªãch v·ªõi ch√∫ng t√¥i.
            </p>
          </div>

          <div class="reviews-slider" v-if="!isLoadingReviews">
            <div class="review-quote" v-if="activeReview">
              <div class="quote-icon">"</div>
              <p class="quote-text">{{ activeReview.content }}</p>
              <div class="author-info">
                <strong>{{ activeReview.author }}</strong>
                <span v-if="activeReview.tenHomestay">- {{ activeReview.tenHomestay }}</span>
                <span v-if="activeReview.location">- {{ activeReview.location }}</span>
              </div>
            </div>
          </div>

          <div class="review-tabs">
            <button v-for="(review, index) in reviews" :key="index"
              :class="['tab-button', { active: activeReviewIndex === index }]" @click="activeReviewIndex = index">
              {{ review.author }}<span v-if="review.tenHomestay"> - {{ review.tenHomestay }}</span>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Ph·∫ßn C√¢u h·ªèi th∆∞·ªùng g·∫∑p -->
    <section class="faq-section">
      <div class="container">
        <h2 class="section-title">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</h2>
        <p class="faq-subtitle">Gi·∫£i ƒë√°p th·∫Øc m·∫Øc c·ªßa b·∫°n v·ªÅ d·ªãch v·ª• c·ªßa ch√∫ng t√¥i</p>

        <div class="faq-container">
          <div class="faq-item" v-for="(item, index) in faqItems" :key="index">
            <div class="faq-question" @click="toggleFaq(index)" :class="{ 'active': activeFaq === index }">
              <h3>{{ item.question }}</h3>
              <i class="fas" :class="activeFaq === index ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
            <div class="faq-answer" :class="{ 'show': activeFaq === index }">
              <p>{{ item.answer }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Ph·∫ßn Tin t·ª©c & Kh√°m ph√° -->
    <section class="news-section">
      <div class="container">
        <div class="news-header">
          <div>
            <h2 class="section-title">
              M·ªôc Ch√¢u: Kh√°m ph√° s·ª± ƒë·∫∑c s·∫Øc v√† c·∫≠p nh·∫≠t tin t·ª©c m·ªõi nh·∫•t
            </h2>
            <p class="news-subtitle">
              M·ªôc Ch√¢u: B√≠ m·∫≠t v√† cu·ªôc s·ªëng trong l√†nh - Kh√°m ph√° v√† c·∫≠p nh·∫≠t nh·ªØng tin t·ª©c h·∫•p d·∫´n
              t·ª´ ƒëi·ªÉm ƒë·∫øn tuy·ªát v·ªùi n√†y.
            </p>
          </div>
          <div class="news-divider"></div>
        </div>

        <!-- Tr·∫°ng th√°i ƒëang t·∫£i tin t·ª©c -->
        <div v-if="isLoadingNews" class="loading-container">
          <i class="fas fa-spinner fa-spin"></i>
          <p>ƒêang t·∫£i tin t·ª©c...</p>
        </div>

        <!-- Th√¥ng b√°o l·ªói tin t·ª©c -->
        <div v-else-if="hasNewsError" class="error-container">
          <i class="fas fa-exclamation-circle"></i>
          <p>{{ newsErrorMessage }}</p>
          <button class="retry-btn" @click="fetchNewsData">Th·ª≠ l·∫°i</button>
        </div>

        <!-- Hi·ªÉn th·ªã tin t·ª©c -->
        <div v-else class="news-grid">
          <div v-for="article in newsArticles" :key="article.id" class="news-card">
            <div class="news-image">
              <img :src="article.anhBia || defaultNewsImage" :alt="article.tieuDe" />
            </div>
            <h3 class="news-title">{{ article.tieuDe }}</h3>
            <p class="news-excerpt">{{ article.moTaNgan }}</p>
            <router-link :to="`/tin-tuc/${article.id}`" class="news-read-more">ƒê·ªçc th√™m</router-link>
          </div>
        </div>
      </div>
    </section>

    <!-- Ph·∫ßn K√™u G·ªçi H√†nh ƒê·ªông -->
  </div>
</template>

<script setup>
import { ref, computed, onMounted, watch } from 'vue'
import { getAllHomeStay, getAnhHomeStayByHomestayId, getHomeStayById, getLoaiHomeStay } from '@/Service/HomeStayService'
import { getAllTinTuc } from '@/Service/TinTucService'
import { getAnhTinTucByTinTucId } from '@/Service/AnhTinTucService'
import { getAllDanhGia } from '@/Service/DanhGiaService' // Th√™m d√≤ng n√†y
import { useRouter } from 'vue-router'
import api from '@/utils/api'

const router = useRouter()
const homestays = ref([])
const isLoading = ref(true)
const hasError = ref(false)
const errorMessage = ref('')
const defaultImage =
  'https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80'

// Th√™m c√°c state cho form t√¨m ki·∫øm
const searchName = ref('')
const searchLocation = ref('T·∫•t c·∫£ lo·∫°i homestay')
const searchPrice = ref('T·∫•t c·∫£ m·ª©c gi√°')

// State cho lo·∫°i homestay
const loaiHomestays = ref([])

// Th√™m d·ªØ li·ªáu ƒë√°nh gi√° m·∫´u
const isLoadingReviews = ref(false)
const hasReviewsError = ref(false)
const reviewsErrorMessage = ref('')
const activeReviewIndex = ref(0)
const reviews = ref([])
const reviewSlideInterval = ref(null)

// Th√™m d·ªØ li·ªáu tin t·ª©c m·∫´u
// const newsArticles = ref([
//   {
//     id: 1,
//     title: 'Top 3 ƒë·ªìi ch√® ƒë·∫πp nh·∫•t ƒë√°ng ƒë·ªÉ gh√© thƒÉm t·∫°i M·ªôc Ch√¢u',
//     excerpt:
//       'Nh·ªØng ƒë·ªìi ch√® xanh m∆∞·ªõt tr·∫£i d√†i t·∫°o n√™n khung c·∫£nh tuy·ªát ƒë·∫πp l√† ƒëi·ªÉm ƒë·∫øn kh√¥ng th·ªÉ b·ªè qua khi du l·ªãch M·ªôc Ch√¢u.',
//     image:
//       'https://images.unsplash.com/photo-1598968693740-7ed0a5c0a8a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80',
//     date: '20/05/2023',
//   },
//   {
//     id: 2,
//     title: '·∫®m th·ª±c M·ªôc Ch√¢u - M√≥n ngon ƒë·∫∑c s·∫£n kh√¥ng th·ªÉ b·ªè l·ª°',
//     excerpt:
//       'Kh√°m ph√° c√°c m√≥n ƒÉn ƒë·∫∑c tr∆∞ng c·ªßa M·ªôc Ch√¢u t·ª´ th·ªãt tr√¢u g√°c b·∫øp, c√° su·ªëi n∆∞·ªõng ƒë·∫øn rau ƒë·∫∑c s·∫£n v√πng cao.',
//     image:
//       'https://images.unsplash.com/photo-1569058242253-92a0c8223b47?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80',
//     date: '15/06/2023',
//   },
//   {
//     id: 3,
//     title: 'Top 3 khu ngh·ªâ d∆∞·ª°ng g·∫ßn th√°c D·∫£i Y·∫øm d√†nh cho gia ƒë√¨nh',
//     excerpt:
//       'Ch·ªâ c·∫ßn r·ªùi kh·ªèi th√†nh ph·ªë kho·∫£ng 1-2 gi·ªù ƒë·ªìng h·ªì, b·∫°n ƒë√£ c√≥ th·ªÉ t·∫≠n h∆∞·ªüng kh√¥ng gian ngh·ªâ d∆∞·ª°ng tuy·ªát v·ªùi.',
//     image:
//       'https://images.unsplash.com/photo-1571896349842-33c89424de2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80',
//     date: '10/07/2023',
//   },
// ])

// // Th√™m state cho ph·∫ßn tin t·ª©c
const newsArticles = ref([])
const isLoadingNews = ref(false)
const hasNewsError = ref(false)
const newsErrorMessage = ref('')
const defaultNewsImage =
  'https://images.unsplash.com/photo-1598968693740-7ed0a5c0a8a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80'

// ƒê√°nh gi√° hi·ªán t·∫°i ƒëang ƒë∆∞·ª£c hi·ªÉn th·ªã
const activeReview = computed(() => {
  return reviews.value[activeReviewIndex.value]
})

// Ph∆∞∆°ng th·ª©c t√¨m ki·∫øm
const handleSearch = () => {
  console.log('ƒêang t√¨m ki·∫øm v·ªõi:', {
    t√™n: searchName.value,
    lo·∫°iHomestay: searchLocation.value,
    gi√°C·∫£: searchPrice.value,
  })

  // Chuy·ªÉn ƒë·∫øn trang k·∫øt qu·∫£ t√¨m ki·∫øm v·ªõi c√°c tham s·ªë t∆∞∆°ng ·ª©ng
  router.push({
    path: '/all-homestays',
    query: {
      name: searchName.value,
      loaiHomestay: searchLocation.value !== 'T·∫•t c·∫£ lo·∫°i homestay' ? searchLocation.value : null,
      price: searchPrice.value !== 'T·∫•t c·∫£ m·ª©c gi√°' ? searchPrice.value : null,
    },
  })
}

// Ph∆∞∆°ng th·ª©c chuy·ªÉn ƒë·∫øn trang Booking
const navigateToBooking = (homestayId) => {
  router.push(`/homestay/${homestayId}`)
}

// L·ªçc ch·ªâ c√°c homestay c√≥ tr·∫°ng th√°i Ho·∫°t ƒë·ªông (ch·∫•p nh·∫≠n c·∫£ boolean true ho·∫∑c chu·ªói "Ho·∫°t ƒë·ªông")
const activeHomestays = computed(() => {
  console.log('T·ªïng s·ªë homestay:', homestays.value.length)
  const result = homestays.value.filter(
    (home) => home.trangThai === true || home.trangThai === 'Ho·∫°t ƒë·ªông',
  )
  console.log('S·ªë homestay ƒëang ho·∫°t ƒë·ªông:', result.length)
  return result
})

// Hi·ªÉn th·ªã 6 homestay tr√™n trang ch·ªß thay v√¨ 3
const displayedHomestays = computed(() => {
  return activeHomestays.value.slice(0, 6)
})

// Ph∆∞∆°ng th·ª©c chuy·ªÉn ƒë·∫øn trang hi·ªÉn th·ªã t·∫•t c·∫£ homestay
const viewAllHomestays = () => {
  console.log('Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang t·∫•t c·∫£ homestay')
  router.push('/all-homestays')
}

const fetchHomestayData = async () => {
  try {
    isLoading.value = true
    hasError.value = false
    errorMessage.value = ''

    try {
      // G·ªçi API ƒë·ªÉ l·∫•y d·ªØ li·ªáu homestay
      const res = await getAllHomeStay()
      console.log('D·ªØ li·ªáu homestay t·ª´ API:', res.data)

      // In ra xem c√≥ tr∆∞·ªùng hotenChuHomestay kh√¥ng
      if (res.data && res.data.length > 0) {
        console.log('Ki·ªÉm tra d·ªØ li·ªáu homestay ƒë·∫ßu ti√™n:', {
          id: res.data[0].id,
          ten: res.data[0].tenHomestay,
          chu: res.data[0].hotenChuHomestay,
          allProps: Object.keys(res.data[0]),
        })
      }

      if (res.data && Array.isArray(res.data) && res.data.length > 0) {
        homestays.value = await Promise.all(
          res.data.map(async (homestay) => {
            try {

              // Ki·ªÉm tra n·∫øu homestay ƒë√£ c√≥ tr∆∞·ªùng h√¨nh ·∫£nh t·ª´ d·ªØ li·ªáu tr·ª±c ti·∫øp
              if (homestay.Hinh_Anh) {
                homestay.hinhAnh = homestay.Hinh_Anh;
                console.log(`S·ª≠ d·ª•ng h√¨nh ·∫£nh t·ª´ d·ªØ li·ªáu tr·ª±c ti·∫øp cho homestay ${homestay.id}:`, homestay.Hinh_Anh);
              }
              // N·∫øu kh√¥ng c√≥ tr∆∞·ªùng Hinh_Anh, th·ª≠ v·ªõi tr∆∞·ªùng vi·∫øt th∆∞·ªùng hinhAnh
              else if (homestay.hinhAnh) {
                // ƒê√£ c√≥ h√¨nh ·∫£nh, kh√¥ng c·∫ßn l√†m g√¨ th√™m
                console.log(`ƒê√£ c√≥ h√¨nh ·∫£nh cho homestay ${homestay.id}:`, homestay.hinhAnh);
              }
              // Th·ª≠ t√¨m trong c√°c thu·ªôc t√≠nh kh√°c c√≥ th·ªÉ ch·ª©a URL h√¨nh ·∫£nh
              else if (homestay.image || homestay.imageUrl || homestay.anhDaiDien || homestay.anhBia) {
                homestay.hinhAnh = homestay.image || homestay.imageUrl || homestay.anhDaiDien || homestay.anhBia;
                console.log(`S·ª≠ d·ª•ng h√¨nh ·∫£nh thay th·∫ø cho homestay ${homestay.id}:`, homestay.hinhAnh);
              }
              // N·∫øu kh√¥ng c√≥ tr∆∞·ªùng h√¨nh ·∫£nh tr·ª±c ti·∫øp, g·ªçi API ƒë·ªÉ l·∫•y
              else {
                const anhResponse = await getAnhHomeStayByHomestayId(homestay.id)
                if (anhResponse && anhResponse.data && anhResponse.data.length > 0) {
                  // ∆Øu ti√™n ·∫£nh b√¨a ƒëang ho·∫°t ƒë·ªông
                  const anhBia = anhResponse.data.find(img => img.anhBia === true && img.trangThai !== false) ||
                    anhResponse.data.find(img => img.anhBia === true);

                  // N·∫øu kh√¥ng c√≥ ·∫£nh b√¨a, d√πng ·∫£nh ƒë·∫ßu ti√™n ƒëang ho·∫°t ƒë·ªông
                  const anhDauTien = anhBia || anhResponse.data.find(img => img.trangThai !== false) || anhResponse.data[0];

                  if (anhDauTien) {
                    homestay.hinhAnh = anhDauTien.duongDanAnh;
                    console.log(`L·∫•y h√¨nh ·∫£nh t·ª´ API cho homestay ${homestay.id}:`, anhDauTien.duongDanAnh);
                  } else {
                    console.log(`Kh√¥ng t√¨m th·∫•y ·∫£nh ph√π h·ª£p cho homestay ${homestay.id}`);
                  }


                } else {
                  console.log(`Kh√¥ng c√≥ ·∫£nh n√†o cho homestay ${homestay.id}`);
                }
              }
            } catch (imgError) {
              console.error(`L·ªói khi l·∫•y ·∫£nh cho homestay ${homestay.id}:`, imgError)
            }
            return homestay
          }),
        )
      } else {
        hasError.value = true
        errorMessage.value = 'Kh√¥ng c√≥ d·ªØ li·ªáu homestay n√†o ƒë∆∞·ª£c t√¨m th·∫•y t·ª´ API.'
        console.warn('API tr·∫£ v·ªÅ d·ªØ li·ªáu kh√¥ng h·ª£p l·ªá:', res.data)
      }
    } catch (apiError) {
      hasError.value = true
      if (apiError.response && apiError.response.status === 401) {
        errorMessage.value =
          'API y√™u c·∫ßu x√°c th·ª±c nh∆∞ng kh√¥ng c√≥ d·ªØ li·ªáu c√¥ng khai. Vui l√≤ng ki·ªÉm tra c·∫•u h√¨nh backend.'
        console.error('L·ªói 401 - API y√™u c·∫ßu x√°c th·ª±c:', apiError.response.data)
      } else if (apiError.message.includes('Network Error')) {
        errorMessage.value = 'Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn m√°y ch·ªß. Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi m·∫°ng.'
      } else {
        errorMessage.value =
          'L·ªói khi t·∫£i d·ªØ li·ªáu homestay: ' + (apiError.response?.data?.message || apiError.message)
      }
      console.error('L·ªói API chi ti·∫øt:', {
        message: apiError.message,
        status: apiError.response?.status,
        data: apiError.response?.data,
        url: apiError.config?.url,
      })
    }
  } catch (err) {
    console.error('L·ªói kh√¥ng x√°c ƒë·ªãnh:', err)
    hasError.value = true
    errorMessage.value = 'ƒê√£ x·∫£y ra l·ªói kh√¥ng x√°c ƒë·ªãnh. Vui l√≤ng th·ª≠ l·∫°i sau.'
  } finally {
    isLoading.value = false
  }
}

// H√†m l·∫•y d·ªØ li·ªáu lo·∫°i homestay t·ª´ API
const fetchLoaiHomestayData = async () => {
  try {
    const res = await getLoaiHomeStay()
    if (res.data && Array.isArray(res.data)) {
      // Ch·ªâ l·∫•y c√°c lo·∫°i homestay ƒëang ho·∫°t ƒë·ªông
      loaiHomestays.value = res.data.filter(loai => loai.trangThai === true)
      console.log('D·ªØ li·ªáu lo·∫°i homestay:', loaiHomestays.value)
    }
  } catch (error) {
    console.error('L·ªói khi l·∫•y d·ªØ li·ªáu lo·∫°i homestay:', error)
    // N·∫øu kh√¥ng l·∫•y ƒë∆∞·ª£c d·ªØ li·ªáu t·ª´ API, s·ª≠ d·ª•ng d·ªØ li·ªáu m·∫´u
    loaiHomestays.value = [
      { id: 1, tenLoaiHomestay: 'Homestay truy·ªÅn th·ªëng' },
      { id: 2, tenLoaiHomestay: 'Cottage g·ªó' },
      { id: 3, tenLoaiHomestay: 'Villa cao c·∫•p' },
      { id: 4, tenLoaiHomestay: 'Bungalow' }
    ]
  }
}

// H√†m l·∫•y d·ªØ li·ªáu tin t·ª©c t·ª´ API
const fetchNewsData = async () => {
  try {
    isLoadingNews.value = true
    hasNewsError.value = false
    newsErrorMessage.value = ''

    const res = await getAllTinTuc()
    console.log('D·ªØ li·ªáu tin t·ª©c t·ª´ API:', res.data)

    if (res.data && Array.isArray(res.data)) {
      // L·∫•y 3 tin t·ª©c m·ªõi nh·∫•t
      const latestNews = res.data
        .filter((news) => news.trangThai !== false) // L·ªçc tin t·ª©c c√≥ tr·∫°ng th√°i ho·∫°t ƒë·ªông
        .sort((a, b) => new Date(b.ngayDang) - new Date(a.ngayDang)) // S·∫Øp x·∫øp theo ng√†y ƒëƒÉng m·ªõi nh·∫•t
        .slice(0, 3) // L·∫•y 3 tin t·ª©c ƒë·∫ßu ti√™n

      // L·∫•y ·∫£nh b√¨a cho m·ªói tin t·ª©c
      newsArticles.value = await Promise.all(
        latestNews.map(async (news) => {
          try {
            const anhResponse = await getAnhTinTucByTinTucId(news.id)
            if (anhResponse && anhResponse.data && anhResponse.data.length > 0) {
              // T√¨m ·∫£nh b√¨a ho·∫∑c ·∫£nh ƒë·∫ßu ti√™n
              const coverImage =
                anhResponse.data.find((img) => img.anhBia === true) || anhResponse.data[0]
              if (coverImage) {
                news.anhBia = coverImage.duongDanAnh
              }
            }
          } catch (imgError) {
            console.error(`L·ªói khi l·∫•y ·∫£nh cho tin t·ª©c ${news.id}:`, imgError)
          }

          // T·∫°o m√¥ t·∫£ ng·∫Øn n·∫øu kh√¥ng c√≥
          if (!news.moTaNgan && news.noiDung) {
            // L·∫•y 150 k√Ω t·ª± ƒë·∫ßu ti√™n t·ª´ n·ªôi dung v√† lo·∫°i b·ªè c√°c th·∫ª HTML
            news.moTaNgan =
              news.noiDung
                .replace(/<[^>]*>/g, '') // Lo·∫°i b·ªè c√°c th·∫ª HTML
                .slice(0, 150) + '...'
          }

          return news
        }),
      )
    } else {
      hasNewsError.value = true
      newsErrorMessage.value = 'Kh√¥ng c√≥ d·ªØ li·ªáu tin t·ª©c n√†o ƒë∆∞·ª£c t√¨m th·∫•y.'
    }
  } catch (error) {
    console.error('L·ªói khi t·∫£i d·ªØ li·ªáu tin t·ª©c:', error)
    hasNewsError.value = true
    newsErrorMessage.value = 'ƒê√£ x·∫£y ra l·ªói khi t·∫£i d·ªØ li·ªáu tin t·ª©c. Vui l√≤ng th·ª≠ l·∫°i sau.'
  } finally {
    isLoadingNews.value = false
  }
}

// Fetch reviews from backend
const fetchReviews = async () => {
  isLoadingReviews.value = true
  hasReviewsError.value = false
  reviewsErrorMessage.value = ''
  try {
    const res = await getAllDanhGia()
    console.log('D·ªØ li·ªáu ƒë√°nh gi√° t·ª´ API:', res.data)
    if (res.data && Array.isArray(res.data)) {
      // L·∫•y 5 ƒë√°nh gi√° m·ªõi nh·∫•t
      const latestReviews = res.data
        .filter(r => r.trangThai !== false)
        .sort((a, b) => new Date(b.ngayTao || b.createdAt) - new Date(a.ngayTao || a.createdAt))
        .slice(0, 5)
      // L·∫•y t√™n homestay cho t·ª´ng ƒë√°nh gi√°
      const reviewsWithHomestay = await Promise.all(latestReviews.map(async (r) => {
        let tenHomestay = ''
        if (r.homeStayId) {
          try {
            const homeStayRes = await getHomeStayById(r.homeStayId)
            tenHomestay = homeStayRes.data?.tenHomestay || ''
          } catch (e) {
            console.warn('Kh√¥ng l·∫•y ƒë∆∞·ª£c t√™n homestay cho review', r.id, e)
          }
        }
        return {
          id: r.id,
          author: r.tenKhachHang || r.tenNguoiDanhGia || r.hoTen || r.nguoiDanhGia || r.author || '',
          tenHomestay,
          location: r.diaChi || r.location || '',
          content: r.noiDung || r.content || '',
          rating: r.soSao || r.rating || 5,
        }
      }))
      reviews.value = reviewsWithHomestay
    } else {
      hasReviewsError.value = true
      reviewsErrorMessage.value = 'Kh√¥ng c√≥ d·ªØ li·ªáu ƒë√°nh gi√° n√†o.'
    }
  } catch (error) {
    hasReviewsError.value = true
    reviewsErrorMessage.value = 'L·ªói khi t·∫£i d·ªØ li·ªáu ƒë√°nh gi√°. Vui l√≤ng th·ª≠ l·∫°i sau.'
    console.error('L·ªói khi t·∫£i ƒë√°nh gi√°:', error)
  } finally {
    isLoadingReviews.value = false
  }
}

// Bi·∫øn cho hero slideshow
const currentSlide = ref(0);
const slideInterval = ref(null);

// Ph∆∞∆°ng th·ª©c cho slideshow
const nextSlide = () => {
  currentSlide.value = (currentSlide.value + 1) % 3;
};

const prevSlide = () => {
  currentSlide.value = (currentSlide.value - 1 + 3) % 3;
};

const setSlide = (index) => {
  currentSlide.value = index;
};

const startSlideshow = () => {
  stopSlideshow(); // Clear any existing interval
  slideInterval.value = setInterval(() => {
    nextSlide();
  }, 5000);
};

const stopSlideshow = () => {
  if (slideInterval.value) {
    clearInterval(slideInterval.value);
    slideInterval.value = null;
  }
};

// Bi·∫øn cho FAQ
const activeFaq = ref(null);
const faqItems = ref([
  {
    question: "Th·ªùi gian nh·∫≠n v√† tr·∫£ ph√≤ng?",
    answer: "Gi·ªù nh·∫≠n ph√≤ng: 14:00, gi·ªù tr·∫£ ph√≤ng: 12:00. N·∫øu b·∫°n c·∫ßn nh·∫≠n ph√≤ng s·ªõm ho·∫∑c tr·∫£ ph√≤ng mu·ªôn, vui l√≤ng li√™n h·ªá tr∆∞·ªõc ƒë·ªÉ ch√∫ng t√¥i h·ªó tr·ª£."
  },
  {
    question: "Ch√≠nh s√°ch h·ªßy ƒë·∫∑t ph√≤ng?",
    answer: "Mi·ªÖn ph√≠ h·ªßy ph√≤ng tr∆∞·ªõc 7 ng√†y. H·ªßy trong v√≤ng 3-7 ng√†y s·∫Ω m·∫•t 50% ti·ªÅn ƒë·∫∑t c·ªçc. H·ªßy trong v√≤ng 3 ng√†y s·∫Ω kh√¥ng ƒë∆∞·ª£c ho√†n ti·ªÅn ƒë·∫∑t c·ªçc."
  },
  {
    question: "C√≥ d·ªãch v·ª• ƒë∆∞a ƒë√≥n kh√¥ng?",
    answer: "C√≥, ch√∫ng t√¥i cung c·∫•p d·ªãch v·ª• ƒë∆∞a ƒë√≥n t·ª´ b·∫øn xe M·ªôc Ch√¢u v·ªõi chi ph√≠ b·ªï sung. Vui l√≤ng ƒë·∫∑t tr∆∞·ªõc √≠t nh·∫•t 24 gi·ªù."
  },
  {
    question: "C√≥ ch·ªó ƒë·∫≠u xe kh√¥ng?",
    answer: "C√≥, t·∫•t c·∫£ c√°c homestay c·ªßa ch√∫ng t√¥i ƒë·ªÅu c√≥ b√£i ƒë·∫≠u xe mi·ªÖn ph√≠ cho kh√°ch."
  },
  {
    question: "C√≥ cho ph√©p mang th√∫ c∆∞ng kh√¥ng?",
    answer: "M·ªôt s·ªë homestay cho ph√©p mang th√∫ c∆∞ng v·ªõi ƒëi·ªÅu ki·ªán ri√™ng. Vui l√≤ng li√™n h·ªá tr·ª±c ti·∫øp ƒë·ªÉ bi·∫øt chi ti·∫øt."
  }
]);

// Ph∆∞∆°ng th·ª©c cho FAQ
const toggleFaq = (index) => {
  if (activeFaq.value === index) {
    activeFaq.value = null;
  } else {
    activeFaq.value = index;
  }
};

// Bi·∫øn cho ƒë√°nh gi√° slideshow
const nextReviewSlide = () => {
  if (reviews.value.length > 0) {
    activeReviewIndex.value = (activeReviewIndex.value + 1) % reviews.value.length
  }
}

const startReviewSlideshow = () => {
  stopReviewSlideshow()
  reviewSlideInterval.value = setInterval(() => {
    nextReviewSlide()
  }, 5000)
}

const stopReviewSlideshow = () => {
  if (reviewSlideInterval.value) {
    clearInterval(reviewSlideInterval.value)
    reviewSlideInterval.value = null
  }
}

// Kh·ªüi t·∫°o slideshow khi component ƒë∆∞·ª£c mount
onMounted(() => {
  startSlideshow();
  // Ti·∫øp t·ª•c c√°c onMounted hi·ªán c√≥
  fetchHomestayData();
  fetchLoaiHomestayData(); // L·∫•y d·ªØ li·ªáu lo·∫°i homestay
  fetchNewsData();
  fetchReviews(); // Th√™m d√≤ng n√†y ƒë·ªÉ l·∫•y ƒë√°nh gi√° t·ª´ backend
  startReviewSlideshow();
})

// T·∫°m d·ª´ng slideshow khi tab kh√¥ng ƒë∆∞·ª£c focus
watch(() => document.visibilityState, (newState) => {
  if (newState === 'visible') {
    startSlideshow();
    startReviewSlideshow();
  } else {
    stopSlideshow();
    stopReviewSlideshow();
  }
});

// N·∫øu mu·ªën reset slide khi reviews thay ƒë·ªïi (v√≠ d·ª• sau khi fetch xong)
watch(reviews, () => {
  activeReviewIndex.value = 0
  startReviewSlideshow()
})

// Helper function to fix image URLs if they start with a slash
const fixImageUrl = (url) => {
  if (!url) return defaultImage

  // If it's already an absolute URL, return it as is
  if (url.startsWith('http')) {
    return url
  }

  // If it's a relative URL
  if (url.startsWith('/')) {
    // Use the API base URL from api.js
    return api.defaults.baseURL + url
  }

  return url
}
</script>

<style scoped>
/* Nh·∫≠p Google Fonts (gi·ªëng Mixivivu s·ª≠ d·ª•ng font sans-serif hi·ªán ƒë·∫°i) */
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');

/* ƒê·∫∑t l·∫°i v√† ki·ªÉu c∆° b·∫£n */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.home-container {
  font-family: 'Roboto', sans-serif;
  color: #333;
  background: #f8f9fa;
  /* N·ªÅn x√°m nh·∫°t gi·ªëng Mixivivu */
}

/* Container */
.container {
  max-width: 1140px;
  /* T∆∞∆°ng t·ª± Mixivivu */
  margin: 0 auto;
  padding: 0 15px;
}

/* C·∫£i thi·ªán Hero Section v·ªõi slideshow */
.hero-section {
  position: relative;
  height: 500px;
  overflow: hidden;
  color: #fff;
}

.hero-slideshow {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slide {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  transition: opacity 1s ease-in-out;
  z-index: 1;
}

.slide.active {
  opacity: 1;
  z-index: 2;
}

.slide img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.slide-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 50px;
  height: 50px;
  background-color: rgba(255, 255, 255, 0.2);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 10;
  font-size: 20px;
}

.slide-nav:hover {
  background-color: rgba(255, 255, 255, 0.5);
}

.slide-nav.prev {
  left: 20px;
}

.slide-nav.next {
  right: 20px;
}

.slide-indicators {
  position: absolute;
  bottom: 20px;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  gap: 10px;
  z-index: 10;
}

.indicator {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.5);
  cursor: pointer;
  transition: all 0.3s ease;
}

.indicator.active {
  background-color: white;
  transform: scale(1.2);
}

.hero-content {
  position: relative;
  z-index: 5;
  height: 100%;
  display: flex;
  align-items: center;
  padding: 0 20px;
}

.hero-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.7));
  z-index: 3;
}

.hero-text {
  position: relative;
  z-index: 4;
  max-width: 800px;
  margin: 0 auto;
}

.hero-title {
  font-size: 3rem;
  font-weight: 700;
  margin-bottom: 15px;
  line-height: 1.2;
  text-align: left;
}

.highlight {
  color: #ff6200;
  /* M√†u cam n·ªïi b·∫≠t gi·ªëng Mixivivu */
}

.hero-subtitle {
  font-size: 1.2rem;
  font-weight: 400;
  margin-bottom: 30px;
  opacity: 0.9;
  text-align: left;
}

.hero-search {
  background: #fff;
  border-radius: 30px;
  padding: 25px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  max-width: 1000px;
  margin: 0 auto;
}

/* Make search row balanced */
.search-box {
  display: flex;
  gap: 15px;
  align-items: center;
  flex-wrap: wrap;
}

@media (min-width: 768px) {
  .search-box {
    flex-wrap: nowrap;
  }
}

/* On larger screens, switch to grid for perfect alignment */
@media (min-width: 992px) {
  .hero-search .search-box {
    display: grid;
    grid-template-columns: 2fr 1.2fr 1.2fr auto;
    align-items: stretch;
    gap: 15px;
  }
}

.search-input {
  position: relative;
  flex: 1;
  min-width: 200px;
}

/* Uniform control height */
.search-input input,
.search-input select {
  width: 100%;
  padding: 12px 15px 12px 40px;
  border: 1px solid #e0e0e0;
  border-radius: 30px;
  font-size: 0.95rem;
  transition: border-color 0.3s ease;
  height: 48px;
  line-height: 24px;
}

.search-input.dropdown select {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%236c757d' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 20px center;
  padding-right: 40px;
}

.search-icon {
  position: absolute;
  top: 50%;
  left: 16px;
  transform: translateY(-50%);
  color: #6c757d;
  font-size: 1rem;
}

.search-input input:focus,
.search-input select:focus {
  outline: none;
  border-color: #48cae4;
  box-shadow: 0 0 0 3px rgba(72, 202, 228, 0.2);
}

.search-input input[readonly] {
  background: #f8f9fa;
  cursor: not-allowed;
}

/* Button matches input height */
.search-btn {
  background: #48cae4;
  color: #fff;
  border: none;
  padding: 0 28px;
  border-radius: 30px;
  font-weight: 500;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.3s ease;
  min-width: 120px;
  text-align: center;
  height: 48px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
}

.search-btn:hover {
  background: #0096c7;
}

/* Ph·∫ßn T√≠nh NƒÉng */
.features-section {
  padding: 60px 0;
  background: #fff;
}

.section-title {
  font-size: 1.8rem;
  font-weight: 600;
  text-align: left;
  margin-bottom: 25px;
  color: #333;
  padding-left: 10px;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

.feature-card {
  background: #fff;
  padding: 25px;
  border-radius: 15px;
  text-align: center;
  box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  border: 1px solid #e8e8e8;
}

.feature-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
}

.feature-icon {
  font-size: 2rem;
  color: #48cae4;
  margin-bottom: 15px;
}

.feature-card h3 {
  font-size: 1.25rem;
  font-weight: 500;
  margin-bottom: 10px;
  color: #333;
}

.feature-card p {
  font-size: 0.9rem;
  color: #6c757d;
  line-height: 1.5;
}

/* Ph·∫ßn Homestay - updated with border */
.homestays-section {
  padding: 60px 0;
  background: #f8f9fa;
}

/* C·∫≠p nh·∫≠t ph·∫ßn CSS cho Homestay Cards */
.homestays-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 25px;
  margin-bottom: 40px;
}

.homestay-card {
  background: #fff;
  border-radius: 15px;
  overflow: hidden;
  box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  border: 1px solid #e8e8e8;
  position: relative;
  display: flex;
  flex-direction: column;
  height: 100%;
}

.homestay-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
}

.homestay-image {
  position: relative;
  height: 220px;
  overflow: hidden;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  display: flex;
  align-items: center;
  justify-content: center;
}

.homestay-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.homestay-image:empty::before {
  content: 'üè†';
  font-size: 48px;
  color: #6c757d;
  opacity: 0.5;
}

.homestay-status {
  position: absolute;
  top: 15px;
  right: 15px;
  padding: 4px 12px;
  background: #28a745;
  color: #fff;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 500;
  z-index: 2;
}

.homestay-rating {
  position: absolute;
  top: 15px;
  left: 15px;
  background: rgba(255, 193, 7, 0.9);
  color: #fff;
  border-radius: 20px;
  padding: 4px 12px;
  font-size: 0.75rem;
  font-weight: 500;
  z-index: 2;
  display: flex;
  align-items: center;
  gap: 4px;
}

.stars {
  color: #fff;
  font-size: 0.85rem;
}

.rating-text {
  color: #fff;
  font-size: 0.8rem;
}

.homestay-content {
  padding: 20px;
  flex: 1;
  display: flex;
  flex-direction: column;
}

.homestay-location {
  display: flex;
  align-items: center;
  gap: 5px;
  margin-bottom: 8px;
  font-size: 0.85rem;
  color: #6c757d;
}

.homestay-content h3 {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 12px;
  color: #333;
  line-height: 1.4;
}

.homestay-details {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 15px;
  padding-bottom: 15px;
  border-bottom: 1px solid #e8e8e8;
  font-size: 0.85rem;
  color: #6c757d;
}

.homestay-details span {
  display: flex;
  align-items: center;
  gap: 5px;
}

.homestay-owner {
  display: flex;
  align-items: center;
  gap: 5px;
  margin-bottom: 15px;
  padding-bottom: 15px;
  font-size: 0.85rem;
  color: #6c757d;
  border-bottom: 1px solid #e8e8e8;
}

.homestay-price {
  display: flex;
  align-items: baseline;
  gap: 5px;
  margin-bottom: 20px;
}

.price {
  font-size: 1.4rem;
  font-weight: 600;
  color: #48cae4;
}

.price-unit {
  font-size: 0.9rem;
  color: #6c757d;
}

.book-now-btn {
  width: 100%;
  padding: 12px;
  background: #48cae4;
  color: #fff;
  border: none;
  border-radius: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.3s ease;
  text-align: center;
  margin-top: auto;
}

.book-now-btn:hover {
  background: #0096c7;
}

.view-more-line {
  text-align: center;
  margin-top: 35px;
  width: 100%;
  display: flex;
  justify-content: center;
}

.line-separator {
  display: flex;
  align-items: center;
  gap: 20px;
  width: 100%;
  max-width: 400px;
}

.line {
  flex: 1;
  height: 1px;
  background: linear-gradient(to right, transparent, #48cae4, transparent);
}

.view-more-text {
  color: #48cae4;
  font-weight: 500;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  white-space: nowrap;
  padding: 0 10px;
}

.view-more-text:hover {
  color: #0096c7;
  transform: scale(1.05);
}

/* Ph·∫ßn K√™u G·ªçi H√†nh ƒê·ªông */
.cta-section {
  background: linear-gradient(135deg, #48cae4, #0096c7);
  color: #fff;
  padding: 60px 0;
  text-align: center;
  border-radius: 0;
}

.cta-content h2 {
  font-size: 2rem;
  font-weight: 600;
  margin-bottom: 15px;
}

.cta-content p {
  font-size: 1rem;
  max-width: 600px;
  margin: 0 auto 30px;
  color: #e9ecef;
}

.cta-buttons {
  display: flex;
  gap: 15px;
  justify-content: center;
}

.cta-btn {
  padding: 12px 30px;
  border-radius: 30px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.3s ease;
}

.cta-btn.primary {
  background: #ff6200;
  /* M√†u cam n·ªïi b·∫≠t gi·ªëng Mixivivu */
  color: #fff;
}

.cta-btn.primary:hover {
  background: #e65100;
}

.cta-btn.secondary {
  background: transparent;
  border: 2px solid #fff;
  color: #fff;
}

.cta-btn.secondary:hover {
  background: #fff;
  color: #007bff;
}

/* Tr·∫°ng th√°i T·∫£i v√† L·ªói */
.loading-container,
.error-container {
  text-align: center;
  padding: 35px;
  background: #fff;
  border-radius: 15px;
  box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
  margin-bottom: 25px;
  border: 1px solid #e8e8e8;
}

.loading-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.loading-container p {
  font-size: 1rem;
  color: #007bff;
}

.error-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.error-container p {
  font-size: 1rem;
  color: #dc3545;
}

.retry-btn {
  background: #48cae4;
  color: #fff;
  border: none;
  padding: 10px 20px;
  border-radius: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.3s ease;
}

.retry-btn:hover {
  background: #0096c7;
}

/* Ph·∫ßn ƒê√°nh gi√° */
.reviews-section {
  padding: 80px 0;
  background: #e6f7fb;
  position: relative;
  overflow: hidden;
}

.reviews-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ0MCIgaGVpZ2h0PSI2MDAiIHZpZXdCb3g9IjAgMCAxNDQwIDYwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBvcGFjaXR5PSIwLjEiIGQ9Ik0tMzUwLjM1OSAtMjI0LjQxNUMzOS4zNzEgLTQ0Ni44OTMgNzAwLjQyMyA3Ni4wNDggMTIxMy45NSAzNTYuMDg1QzE3MjcuNDggNjM2LjEyMyAxNjQ4LjE1IDEyNjEuMjMgMTI1OC40MiAxNDgzLjcxQzg2OC42ODggMTcwNi4xOSAyMDcuNjM2IDExODMuMjUgLTMwNS44ODkgOTAzLjIxNEMtODE5LjQxNCA2MjMuMTc2IC03NDAuMDg5IC0xLjkzOCAtMzUwLjM1OSAtMjI0LjQxNVoiIHN0cm9rZT0iIzQ4Y2FlNCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9zdmc+');
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  opacity: 0.4;
  z-index: 1;
}

.reviews-section::after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 0;
  width: 100%;
  height: 50px;
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ0MCIgaGVpZ2h0PSI4MCIgdmlld0JveD0iMCAwIDE0NDAgODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE0NDAsMEgwVjgwQzI0MCw1MCA0ODAsMjAgNzIwLDIwQzk2MCwyMCAxMjAwLDUwIDE0NDAsODBWMFoiIGZpbGw9IiNlNmY3ZmIiIGZpbGwtb3BhY2l0eT0iMC41Ii8+PC9zdmc+');
  background-size: cover;
  z-index: 1;
}

.reviews-content {
  max-width: 1000px;
  margin: 0 auto;
  position: relative;
  z-index: 2;
}

.reviews-header {
  margin-bottom: 40px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.reviews-slider {
  position: relative;
  margin-bottom: 40px;
}

.review-quote {
  background: #fff;
  border-radius: 15px;
  padding: 40px 40px 40px 60px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
  position: relative;
  border-left: 4px solid #48cae4;
}

.quote-icon {
  position: absolute;
  top: 30px;
  left: 30px;
  font-size: 6rem;
  color: #48cae4;
  opacity: 0.2;
  font-family: Georgia, serif;
  line-height: 0;
  height: 40px;
}

.quote-text {
  font-size: 1.1rem;
  line-height: 1.8;
  color: #333;
  margin-bottom: 20px;
}

.author-info {
  color: #666;
  font-size: 0.95rem;
  text-align: right;
  font-weight: 500;
}

.review-tabs {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  margin-top: 30px;
}

.tab-button {
  background: #fff;
  border: 1px solid #e0e0e0;
  border-radius: 30px;
  padding: 10px 20px;
  font-size: 0.9rem;
  color: #666;
  cursor: pointer;
  transition: all 0.3s ease;
}

.tab-button:hover {
  background: #f0f9fc;
  border-color: #48cae4;
}

.tab-button.active {
  background: #48cae4;
  color: #fff;
  border-color: #48cae4;
}

@media (max-width: 768px) {
  .review-tabs {
    justify-content: center;
  }

  .reviews-subtitle {
    text-align: left;
    margin-left: 0;
  }
}

/* Ph·∫ßn Tin t·ª©c */
.news-section {
  padding: 80px 0;
  background: #fff;
}

.news-header {
  margin-bottom: 40px;
  position: relative;
}

.news-subtitle {
  font-size: 1.1rem;
  color: #666;
  max-width: 800px;
  margin-top: 5px;
  padding-left: 10px;
}

.news-divider {
  width: 80px;
  height: 4px;
  background: #48cae4;
  margin: 15px 0 0 10px;
}

.news-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 30px;
}

.news-card {
  background: #fff;
  border-radius: 15px;
  overflow: hidden;
  box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  border: 1px solid #e8e8e8;
}

.news-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
}

.news-image {
  height: 220px;
  overflow: hidden;
}

.news-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.news-card:hover .news-image img {
  transform: scale(1.05);
}

.news-title {
  padding: 20px 20px 10px;
  font-size: 1.2rem;
  font-weight: 600;
  color: #333;
  line-height: 1.4;
}

.news-excerpt {
  padding: 0 20px 15px;
  font-size: 0.95rem;
  color: #666;
  line-height: 1.6;
}

.news-read-more {
  display: inline-block;
  padding: 0 20px 20px;
  color: #48cae4;
  font-weight: 500;
  text-decoration: none;
  font-size: 0.9rem;
  transition: color 0.3s ease;
}

.news-read-more:hover {
  color: #0096c7;
}

@media (max-width: 768px) {
  .news-grid {
    grid-template-columns: 1fr;
  }
}

/* Ph·∫ßn C√¢u h·ªèi th∆∞·ªùng g·∫∑p */
.faq-section {
  padding: 60px 0;
  background-color: #ffffff;
}

.faq-subtitle {
  font-size: 1.1rem;
  color: #666;
  max-width: 700px;
  margin: 15px 0 30px 10px;
}

.faq-container {
  max-width: 800px;
  margin: 0 auto;
}

.faq-item {
  margin-bottom: 15px;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
  border: 1px solid #eaeaea;
}

.faq-question {
  background-color: #fff;
  padding: 20px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s ease;
}

.faq-question:hover {
  background-color: #f9f9f9;
}

.faq-question.active {
  background-color: #f0f9fc;
  border-left: 4px solid #48cae4;
}

.faq-question h3 {
  font-size: 1.1rem;
  font-weight: 500;
  margin: 0;
  color: #333;
}

.faq-question i {
  color: #48cae4;
  transition: transform 0.3s ease;
}

.faq-question.active i {
  transform: rotate(180deg);
}

.faq-answer {
  background-color: #fff;
  padding: 0 20px;
  max-height: 0;
  overflow: hidden;
  transition: all 0.3s ease;
}

.faq-answer.show {
  max-height: 300px;
  padding: 20px;
  border-top: 1px solid #eee;
}

.faq-answer p {
  margin: 0;
  font-size: 0.95rem;
  line-height: 1.6;
  color: #666;
}

/* Thi·∫øt k·∫ø Responsive */
@media (max-width: 1024px) {
  .search-box {
    flex-direction: column;
  }

  .hero-title {
    font-size: 2.5rem;
  }

  .section-title {
    font-size: 1.75rem;
  }
}

@media (max-width: 768px) {
  .homestays-grid {
    grid-template-columns: 1fr;
  }

  .features-grid {
    grid-template-columns: 1fr;
  }

  .cta-buttons {
    flex-direction: column;
    align-items: center;
  }

  .search-btn {
    width: 100%;
  }
}
</style>
